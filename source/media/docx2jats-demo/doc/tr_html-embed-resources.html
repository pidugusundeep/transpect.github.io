<?xml version="1.0" encoding="UTF-8"?><html xmlns:p="http://www.w3.org/ns/xproc" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" type="text/css" href="transpectdoc.css" /><link rel="stylesheet" type="text/css" href="highlight/styles/default.css" /><script src="jquery.js"></script><script src="highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript" src="transpectdoc.js"></script><title>tr:html-embed-resources – transpectdoc</title></head><body><div id="transpectdoc"><div id="tr_html-embed-resources" class="id-container"><div id="nav" class="macroblock"><h1>docx2jats-demo</h1><ul class="nav"><li><p class="toggle level1" id="nav_frontend"><a class="fold pointer">Frontend Pipelines</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_docx2jats"><a href="docx2jats.html">docx2jats <span title="anonymous – this step has no type">Ⓐ</span></a></p></li></ul></li><li><p class="toggle level1" id="nav_typedSteps"><a class="fold pointer">Step Declarations</a> <span class="count">(72)</span></p><ul><li><p class="toggle level2" id="nav_namespaceSteps_css"><a class="fold pointer">css:…</a> <span class="count">(5)</span></p><ul><li><p class="nav" id="nav_css_generate"><a href="css_generate.html">css:generate</a></p></li><li><p class="toggle level3"><a class="fold pointer">css.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_css_parse"><a href="css_parse.html">css:parse</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">map-style-names.xpl (library)</a> <span class="count">(3)</span></p><ul><li><p class="nav" id="nav_css_consolidate-maps"><a href="css_consolidate-maps.html">css:consolidate-maps</a></p></li><li><p class="nav" id="nav_css_apply-map"><a href="css_apply-map.html">css:apply-map</a></p></li><li><p class="nav" id="nav_css_map-styles"><a href="css_map-styles.html">css:map-styles</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_cx"><a class="fold pointer">cx:…</a> <span class="count">(2)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">library-1.0.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_cx_zip"><a href="cx_zip.html">cx:zip</a></p></li><li><p class="nav" id="nav_cx_message"><a href="cx_message.html">cx:message</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_docx2hub"><a class="fold pointer">docx2hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_docx2hub_convert"><a href="docx2hub_convert.html">docx2hub:convert</a></p></li><li><p class="nav" id="nav_docx2hub_single-tree"><a href="docx2hub_single-tree.html">docx2hub:single-tree</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_epub"><a class="fold pointer">epub:…</a> <span class="count">(6)</span></p><ul><li><p class="nav" id="nav_epub_convert"><a href="epub_convert.html">epub:convert</a></p></li><li><p class="nav" id="nav_epub_create-ocf"><a href="epub_create-ocf.html">epub:create-ocf</a></p></li><li><p class="nav" id="nav_epub_create-ops"><a href="epub_create-ops.html">epub:create-ops</a></p></li><li><p class="nav" id="nav_epub_html-splitter"><a href="epub_html-splitter.html">epub:html-splitter</a></p></li><li><p class="nav" id="nav_epub_create-opf"><a href="epub_create-opf.html">epub:create-opf</a></p></li><li><p class="nav" id="nav_epub_zip-package"><a href="epub_zip-package.html">epub:zip-package</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_hub"><a class="fold pointer">hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_hub_evolve-hub"><a href="hub_evolve-hub.html">hub:evolve-hub</a></p></li><li><p class="nav" id="nav_hub_evolve-hub_lists-by-indent"><a href="hub_evolve-hub_lists-by-indent.html">hub:evolve-hub_lists-by-indent</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_jats"><a class="fold pointer">jats:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_jats_hub2bits"><a href="jats_hub2bits.html">jats:hub2bits</a></p></li><li><p class="nav" id="nav_jats_html"><a href="jats_html.html">jats:html</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_p"><a class="fold pointer">p:…</a> <span class="count">(28)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">xproc-1.0.xpl (library)</a> <span class="count">(28)</span></p><ul><li><p class="nav" id="nav_p_add-attribute"><a href="p_add-attribute.html">p:add-attribute</a></p></li><li><p class="nav" id="nav_p_add-xml-base"><a href="p_add-xml-base.html">p:add-xml-base</a></p></li><li><p class="nav" id="nav_p_delete"><a href="p_delete.html">p:delete</a></p></li><li><p class="nav" id="nav_p_directory-list"><a href="p_directory-list.html">p:directory-list</a></p></li><li><p class="nav" id="nav_p_error"><a href="p_error.html">p:error</a></p></li><li><p class="nav" id="nav_p_filter"><a href="p_filter.html">p:filter</a></p></li><li><p class="nav" id="nav_p_http-request"><a href="p_http-request.html">p:http-request</a></p></li><li><p class="nav" id="nav_p_identity"><a href="p_identity.html">p:identity</a></p></li><li><p class="nav" id="nav_p_insert"><a href="p_insert.html">p:insert</a></p></li><li><p class="nav" id="nav_p_label-elements"><a href="p_label-elements.html">p:label-elements</a></p></li><li><p class="nav" id="nav_p_load"><a href="p_load.html">p:load</a></p></li><li><p class="nav" id="nav_p_pack"><a href="p_pack.html">p:pack</a></p></li><li><p class="nav" id="nav_p_parameters"><a href="p_parameters.html">p:parameters</a></p></li><li><p class="nav" id="nav_p_rename"><a href="p_rename.html">p:rename</a></p></li><li><p class="nav" id="nav_p_set-attributes"><a href="p_set-attributes.html">p:set-attributes</a></p></li><li><p class="nav" id="nav_p_sink"><a href="p_sink.html">p:sink</a></p></li><li><p class="nav" id="nav_p_split-sequence"><a href="p_split-sequence.html">p:split-sequence</a></p></li><li><p class="nav" id="nav_p_store"><a href="p_store.html">p:store</a></p></li><li><p class="nav" id="nav_p_string-replace"><a href="p_string-replace.html">p:string-replace</a></p></li><li><p class="nav" id="nav_p_unwrap"><a href="p_unwrap.html">p:unwrap</a></p></li><li><p class="nav" id="nav_p_wrap"><a href="p_wrap.html">p:wrap</a></p></li><li><p class="nav" id="nav_p_wrap-sequence"><a href="p_wrap-sequence.html">p:wrap-sequence</a></p></li><li><p class="nav" id="nav_p_xslt"><a href="p_xslt.html">p:xslt</a></p></li><li><p class="nav" id="nav_p_exec"><a href="p_exec.html">p:exec</a></p></li><li><p class="nav" id="nav_p_hash"><a href="p_hash.html">p:hash</a></p></li><li><p class="nav" id="nav_p_uuid"><a href="p_uuid.html">p:uuid</a></p></li><li><p class="nav" id="nav_p_validate-with-relax-ng"><a href="p_validate-with-relax-ng.html">p:validate-with-relax-ng</a></p></li><li><p class="nav" id="nav_p_validate-with-schematron"><a href="p_validate-with-schematron.html">p:validate-with-schematron</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_tr"><a class="fold pointer">tr:…</a> <span class="count">(25)</span></p><ul><li><p class="nav" id="nav_tr_file-uri"><a href="tr_file-uri.html">tr:file-uri</a></p></li><li><p class="nav" id="nav_tr_unescape-uri"><a href="tr_unescape-uri.html">tr:unescape-uri</a></p></li><li><p class="nav" id="nav_tr_xslt-mode"><a href="tr_xslt-mode.html">tr:xslt-mode</a></p></li><li><p class="nav" id="nav_tr_store-debug"><a href="tr_store-debug.html">tr:store-debug</a></p></li><li><p class="nav" id="nav_tr_prepend-xml-model"><a href="tr_prepend-xml-model.html">tr:prepend-xml-model</a></p></li><li><p class="nav" id="nav_tr_unzip"><a href="tr_unzip.html">tr:unzip</a></p></li><li><p class="nav" id="nav_tr_paths"><a href="tr_paths.html">tr:paths</a></p></li><li><p class="nav" id="nav_tr_dynamic-transformation-pipeline"><a href="tr_dynamic-transformation-pipeline.html">tr:dynamic-transformation-pipeline</a></p></li><li><p class="nav" id="nav_tr_remove-ns-decl-and-xml-base"><a href="tr_remove-ns-decl-and-xml-base.html">tr:remove-ns-decl-and-xml-base</a></p></li><li><p class="nav" id="nav_tr_check-styles"><a href="tr_check-styles.html">tr:check-styles</a></p></li><li><p class="nav" id="nav_tr_patch-svrl"><a href="tr_patch-svrl.html">tr:patch-svrl</a></p></li><li><p class="nav" id="nav_tr_html-embed-resources"><a href="tr_html-embed-resources.html">tr:html-embed-resources</a></p></li><li><p class="nav" id="nav_tr_oxy-validate-with-schematron"><a href="tr_oxy-validate-with-schematron.html">tr:oxy-validate-with-schematron</a></p></li><li><p class="nav" id="nav_tr_validate-with-rng"><a href="tr_validate-with-rng.html">tr:validate-with-rng</a></p></li><li><p class="nav" id="nav_tr_errorPI2svrl"><a href="tr_errorPI2svrl.html">tr:errorPI2svrl</a></p></li><li><p class="nav" id="nav_tr_validate-with-rng-PI"><a href="tr_validate-with-rng-PI.html">tr:validate-with-rng-PI</a></p></li><li><p class="nav" id="nav_tr_epubcheck-idpf"><a href="tr_epubcheck-idpf.html">tr:epubcheck-idpf</a></p></li><li><p class="toggle level3"><a class="fold pointer">load-cascaded.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_load-cascaded"><a href="tr_load-cascaded.html">tr:load-cascaded</a></p></li><li><p class="nav" id="nav_tr_load-whole-cascade"><a href="tr_load-whole-cascade.html">tr:load-whole-cascade</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">prepend-hub-xml-model.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_tr_prepend-hub-xml-model"><a href="tr_prepend-hub-xml-model.html">tr:prepend-hub-xml-model</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">simple-progress-msg.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_simple-progress-msg"><a href="tr_simple-progress-msg.html">tr:simple-progress-msg</a></p></li><li><p class="nav" id="nav_tr_propagate-caught-error"><a href="tr_propagate-caught-error.html">tr:propagate-caught-error</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">transpect-lib.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_tr_image-identify"><a href="tr_image-identify.html">tr:image-identify</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">validate-with-schematron.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_validate-with-schematron"><a href="tr_validate-with-schematron.html">tr:validate-with-schematron</a></p></li><li><p class="nav" id="nav_tr_validate-with-schematron2"><a href="tr_validate-with-schematron2.html">tr:validate-with-schematron2</a></p></li></ul></li></ul></li></ul></li><li><p class="toggle level1"><a class="fold pointer">Dynamic Evaluation Candidates</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_evolve-hubfallback"><a href="evolve-hubfallback.html">evolve-hub/fallback <span title="anonymous – this step has no type">Ⓐ</span><span title="dynamic – this is an example for a dynamically loaded or generated pipeline">Ⓓ</span></a></p></li></ul></li></ul></div><div id="main" class="macroblock"><h2>tr:html-embed-resources <span class="name" id="step_html-embed-resources">html-embed-resources</span></h2><div class="file-path block"><p class="file-path">xproc-util/html-embed-resources/xpl/html-embed-resources.xpl</p><p class="file-path"> Import URI: http://transpect.io/xproc-util/html-embed-resources/xpl/html-embed-resources.xpl</p></div><div class="documentation block">
    <h1 xmlns="http://transpect.io" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">tr:html-embed-resources</h1>
    <p xmlns="http://transpect.io" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">This step tries to embed external resources such as images, 
      CSS and JavaScript via data URI into the HTML document.</p>
  </div><!--Something went wrong: no SVG representation available.--><div class="interface block input"><h3 class="toggle"><a class="pointer">Input Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">source</span></p></td><td><div class="documentation">
      <p xmlns="http://transpect.io" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">expects an XHTML document</p>
    </div></td><td><ul class="connections"><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/tr_patch-svrl.html">tr:patch-svrl/c:file <span class="name">patch-svrl</span> source</a></li><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/tr_patch-svrl.html#step_d161e205">tr:patch-svrl/tr:store-debug <span class="name">d161e205</span> result</a></li></ul></td></tr></table></div><div class="interface block output"><h3 class="toggle"><a class="pointer">Output Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">result</span><span class="flag primary" title="Primary port">Ⓟ</span></p><p:serialization xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io" port="result" method="xhtml" omit-xml-declaration="false"></p:serialization></td><td><div class="documentation">
      <p xmlns="http://transpect.io" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">provides the XHTML document with embedded resources</p>
    </div></td><td></td></tr></table></div><div class="interface block option"><h3 class="toggle"><a class="pointer">Options</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Default</th></tr><tr><td><p class="option" id="option_exclude"><span class="name">exclude</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Space-separated list of tokens. Available tokens are: image video script style audio object #all.
    (Question: support font as a category on its own?)</p></div></td><td><p><span class="default">''</span></p></td></tr><tr><td><p class="option" id="option_debug"><span class="name">debug</span></p></td><td></td><td><p><span class="default">'no'</span></p></td></tr><tr><td><p class="option" id="option_fail-on-error"><span class="name">fail-on-error</span></p></td><td></td><td><p><span class="default">'true'</span></p></td></tr></table></div><div class="subpipeline block"><h3 class="toggle"><a class="pointer">Subpipeline</a></h3><table><colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /><col class="name" /><col class="inputs" /><col class="outputs" /><col class="options" /></colgroup><tr><th colspan="13">Step</th><th>Inputs</th><th>Outputs</th><th>Options</th></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_top-level-base-uri">top-level-base-uri</span></p></td><td></td><td></td><td>( /*/@xml:base, base-uri(/*) )[1]</td></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_suppress-video">suppress-video</span></p></td><td></td><td></td><td>tokenize($exclude, '\s+')[. = ('#all', 'video')]</td></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_suppress-audio">suppress-audio</span></p></td><td></td><td></td><td>tokenize($exclude, '\s+')[. = ('#all', 'audio')]</td></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_suppress-image">suppress-image</span></p></td><td></td><td></td><td>tokenize($exclude, '\s+')[. = ('#all', 'image')]</td></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_suppress-script">suppress-script</span></p></td><td></td><td></td><td>tokenize($exclude, '\s+')[. = ('#all', 'script')]</td></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_suppress-style">suppress-style</span></p></td><td></td><td></td><td>tokenize($exclude, '\s+')[. = ('#all', 'style')]</td></tr><tr><td colspan="13"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_suppress-object">suppress-object</span></p></td><td></td><td></td><td>tokenize($exclude, '\s+')[. = ('#all', 'object')]</td></tr><tr class="viewport"><td rowspan="51"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_viewport">viewport</span></p></td><td colspan="12"></td><td></td><td></td><td></td></tr><tr><td colspan="12"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_local-base-uri">local-base-uri</span></p></td><td></td><td></td><td>(base-uri(.), $top-level-base-uri)[1]</td></tr><tr><td colspan="12"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_href-attribute">href-attribute</span></p></td><td></td><td></td><td>(*[local-name() = ('img', 'audio', 'video', 'script')]/@src, html:object/@data, html:link/@href, svg:image/@xlink:href)[1]</td></tr><tr><td colspan="12"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_href">href</span></p></td><td></td><td></td><td>if(starts-with($href-attribute, 'data:'))  (: leave data URIs as-is :)               then $href-attribute               else resolve-uri(if(matches($href-attribute, '^(http[s]?|file)://?')) (: resolve regular URIs :)                     then $href-attribute                    else concat(replace($local-base-uri, '^(.+/).+$', '$1'), $href-attribute),                    $local-base-uri)</td></tr><tr class="cases"><td rowspan="47"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d172e51">d172e51</span></p></td><td colspan="11"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="exists(                         /*[local-name() = ('img'[$suppress-image],                                            'audio'[$suppress-audio],                                             'video'[$suppress-video],                                             'script'[$suppress-script])][@src]                       | /html:object[@data][$suppress-object]                       | /html:link[@rel eq 'stylesheet'][@href][$suppress-style]                       | /svg:image[@xlink:href][$suppress-image]                     )">exists(                         /*[local-name() = ('img'[$suppress-image],                                            'audio'[$suppress-audio],                                             'video'[$suppress-video],                                             'script'[$suppress-script])][@src]                       | /html:object[@data][$suppress-object]                       | /html:link[@rel eq 'stylesheet'][@href][$suppress-style]                       | /svg:image[@xlink:href][$suppress-image]                     )</p></td><td colspan="10"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Suppress embedding for elements meeting these conditions. Unfortunately, the conditions could not
        be specified in the p:viewport match attribute because options and variables seem to be inaccessible there.</p></td><td></td><td></td><td></td></tr><tr><td colspan="10"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e58">d172e58</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e58_port_result">result</p></td><td></td></tr><tr class="even cond"><td rowspan="42"><p class="rotate" title="not(starts-with($href-attribute, 'data:'))">not(starts-with($href-attribute, 'data:'))</p></td><td colspan="10"></td><td></td><td></td><td></td></tr><tr class="try"><td rowspan="41"><p class="rotate" title="p:try">p:try <span class="name generated" id="step_d172e63">d172e63</span></p></td><td colspan="9"></td><td></td><td></td><td></td></tr><tr class="group"><td rowspan="29"><p class="rotate" title="p:group">p:group <span class="name generated" id="step_d172e65">d172e65</span></p></td><td colspan="8"></td><td></td><td></td><td></td></tr><tr class="cases"><td rowspan="5"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d172e67">d172e67</span></p></td><td colspan="7"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="$debug eq 'yes'">$debug eq 'yes'</p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="cx_message.html">cx:message</a></span> <span class="name generated" id="step_d172e71">d172e71</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e71_port_result">result</p></td><td><p><a href="cx_message.html#option_message">message</a> = 'embed: ', $href</p></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e79">d172e79</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e79_port_result">result</p></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_construct-http-request">construct-http-request</span></p></td><td><dl><dt>source</dt><dd>
                <pre><code>
 &lt;c:request method="GET" detailed="false"/&gt;

</code></pre>
              </dd></dl></td><td><p id="step_construct-http-request_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'href'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/c:request'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $href</p></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_http-request.html">p:http-request</a></span> <span class="name" id="step_http-request">http-request</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_construct-http-request_port_result">result</a> on <a href="#step_construct-http-request">construct-http-request</a></p></dd></dl></td><td><p id="step_http-request_port_result">result</p></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_add-xmlbase">add-xmlbase</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_http-request_port_result">result</a> on <a href="#step_http-request">http-request</a></p></dd></dl></td><td><p id="step_add-xmlbase_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'xml:base'</p><p><a href="p_add-attribute.html#option_match">match</a> = '//c:body'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $href</p></td></tr><tr class="cases"><td rowspan="20"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d172e108">d172e108</span></p></td><td colspan="7"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="html:img|html:audio|html:video|html:script|html:object|svg:image">html:img|html:audio|html:video|html:script|html:object|svg:image</p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="p_string-replace.html">p:string-replace</a></span> <span class="name generated" id="step_d172e121">d172e121</span></p></td><td><dl><dt>source</dt><dd>
                    <p><a href="#step_viewport_port_current">current</a> on <a href="#step_viewport">viewport</a></p>
                  </dd></dl></td><td><p id="step_d172e121_port_result">result</p></td><td><p><a href="p_string-replace.html#option_match">match</a> = '*[local-name() = ('img', 'audio', 'video', 'script')]/@src|html:object/@data|svg:image/@xlink:href|html:video/html:source|html:audio/@src/html:source/@src'</p><p><a href="p_string-replace.html#option_replace">replace</a> = concat('''', 'data:', $content-type, ';', $encoding, ',', //c:body, '''')</p></td></tr><tr class="even cond"><td rowspan="17"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="p_insert.html">p:insert</a></span> <span class="name" id="step_insert-style">insert-style</span></p></td><td><dl><dt>source</dt><dd>
                    <pre><code>
 &lt;style/&gt;

</code></pre>
                  </dd><dt>insertion</dt><dd>
                    <p><a href="#step_add-xmlbase_port_result">result</a> on <a href="#step_add-xmlbase">add-xmlbase</a></p>
                  </dd></dl></td><td><p id="step_insert-style_port_result">result</p></td><td><p><a href="p_insert.html#option_match">match</a> = 'html:style'</p><p><a href="p_insert.html#option_position">position</a> = 'first-child'</p></td></tr><tr class="try"><td rowspan="14"><p class="rotate" title="p:try">p:try <span class="name" id="step_try-extract-references-from-css">try-extract-references-from-css</span></p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr class="group"><td rowspan="11"><p class="rotate" title="p:group">p:group <span class="name generated" id="step_d172e157">d172e157</span></p></td><td colspan="4"></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_extract-references-from-css">extract-references-from-css</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_insert-style_port_result">result</a> on <a href="#step_insert-style">insert-style</a></p></dd><dt>stylesheet</dt><dd>
                        <p>p:document<a href="../xsl/css-embed-resources.xsl">../xsl/css-embed-resources.xsl</a></p>
                      </dd></dl></td><td><p id="step_extract-references-from-css_port_result">result</p></td><td></td></tr><tr class="viewport"><td rowspan="8"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_viewport-data-uri">viewport-data-uri</span></p></td><td colspan="3"></td><td></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_data-uri">data-uri</span></p></td><td></td><td></td><td>tr:data-uri/@href</td></tr><tr><td colspan="3"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_mime-type">mime-type</span></p></td><td></td><td></td><td>tr:data-uri/@mime-type</td></tr><tr class="cases"><td rowspan="5"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d172e177">d172e177</span></p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="$debug eq 'yes'">$debug eq 'yes'</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="cx_message.html">cx:message</a></span> <span class="name generated" id="step_d172e181">d172e181</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e181_port_result">result</p></td><td><p><a href="cx_message.html#option_message">message</a> = 'embed: ', $data-uri</p></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e189">d172e189</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e189_port_result">result</p></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_unwrap.html">p:unwrap</a></span> <span class="name generated" id="step_d172e223">d172e223</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e223_port_result">result</p></td><td><p><a href="p_unwrap.html#option_match">match</a> = 'html:style//tr:data-uri'</p></td></tr><tr class="catch"><td rowspan="2"><p class="rotate" title="p:catch">p:catch <span class="name generated" id="step_d172e226">d172e226</span></p></td><td colspan="4"></td><td><p id="step_d172e226_port_error">error</p></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e228">d172e228</span></p></td><td><dl><dt>source</dt><dd>
                        <p><a href="#step_insert-style_port_result">result</a> on <a href="#step_insert-style">insert-style</a></p>
                      </dd></dl></td><td><p id="step_d172e228_port_result">result</p></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="p_unwrap.html">p:unwrap</a></span> <span class="name generated" id="step_d172e238">d172e238</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d172e238_port_result">result</p></td><td><p><a href="p_unwrap.html#option_match">match</a> = 'html:style//c:body'</p></td></tr><tr class="catch"><td rowspan="11"><p class="rotate" title="p:catch">p:catch <span class="name generated" id="step_d172e245">d172e245</span></p></td><td colspan="8"></td><td><p id="step_d172e245_port_error">error</p></td><td></td><td></td></tr><tr class="cases"><td rowspan="10"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d172e247">d172e247</span></p></td><td colspan="7"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="$fail-on-error eq 'true'">$fail-on-error eq 'true'</p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="p_error.html">p:error</a></span> <span class="name generated" id="step_d172e251">d172e251</span></p></td><td><dl><dt>source</dt><dd>
                    <pre><code>
 &lt;c:error&gt;Failed to embed HTML resource.&lt;/c:error&gt;

</code></pre>
                  </dd></dl></td><td><p id="step_d172e251_port_result">result</p></td><td><p><a href="p_error.html#option_code">code</a> = 'html-resource-embed-failed'</p></td></tr><tr class="even cond"><td rowspan="7"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e266">d172e266</span></p></td><td><dl><dt>source</dt><dd>
                    <p><a href="#step_viewport_port_current">current</a> on <a href="#step_viewport">viewport</a></p>
                  </dd></dl></td><td><p id="step_d172e266_port_result">result</p></td><td></td></tr><tr class="cases"><td rowspan="5"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d172e274">d172e274</span></p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="$debug eq 'yes'">$debug eq 'yes'</p></td><td colspan="4"></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="cx_message.html">cx:message</a></span> <span class="name generated" id="step_d172e278">d172e278</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d172e266_port_result">result</a> on <a href="#step_d172e266">d172e266</a></p></dd></dl></td><td><p id="step_d172e278_port_result">result</p></td><td><p><a href="cx_message.html#option_message">message</a> = '[WARNING] failed to embed file: ', $href</p></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="4"></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e286">d172e286</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d172e266_port_result">result</a> on <a href="#step_d172e266">d172e266</a></p></dd></dl></td><td><p id="step_d172e286_port_result">result</p></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="10"></td><td></td><td></td><td></td></tr><tr><td colspan="10"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d172e297">d172e297</span></p></td><td><dl><dt>source</dt><dd>
            <p><a href="#step_viewport_port_current">current</a> on <a href="#step_viewport">viewport</a></p>
          </dd></dl></td><td><p id="step_d172e297_port_result">result</p></td><td></td></tr></table></div><div class="interface block use"><h3 class="toggle"><a class="pointer">Used by</a></h3><ul><li><p class="nav" id="nav_tr_patch-svrl">declare-step <a href="tr_patch-svrl.html">tr:patch-svrl</a></p></li></ul></div></div></div></div></body></html>