<?xml version="1.0" encoding="UTF-8"?><html xmlns:p="http://www.w3.org/ns/xproc" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" type="text/css" href="transpectdoc.css" /><link rel="stylesheet" type="text/css" href="highlight/styles/default.css" /><script src="jquery.js"></script><script src="highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript" src="transpectdoc.js"></script><title>epub:create-ops – transpectdoc</title></head><body><div id="transpectdoc"><div id="epub_create-ops" class="id-container"><div id="nav" class="macroblock"><h1>docx2jats-demo</h1><ul class="nav"><li><p class="toggle level1" id="nav_frontend"><a class="fold pointer">Frontend Pipelines</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_docx2jats"><a href="docx2jats.html">docx2jats <span title="anonymous – this step has no type">Ⓐ</span></a></p></li></ul></li><li><p class="toggle level1" id="nav_typedSteps"><a class="fold pointer">Step Declarations</a> <span class="count">(72)</span></p><ul><li><p class="toggle level2" id="nav_namespaceSteps_css"><a class="fold pointer">css:…</a> <span class="count">(5)</span></p><ul><li><p class="nav" id="nav_css_generate"><a href="css_generate.html">css:generate</a></p></li><li><p class="toggle level3"><a class="fold pointer">css.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_css_parse"><a href="css_parse.html">css:parse</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">map-style-names.xpl (library)</a> <span class="count">(3)</span></p><ul><li><p class="nav" id="nav_css_consolidate-maps"><a href="css_consolidate-maps.html">css:consolidate-maps</a></p></li><li><p class="nav" id="nav_css_apply-map"><a href="css_apply-map.html">css:apply-map</a></p></li><li><p class="nav" id="nav_css_map-styles"><a href="css_map-styles.html">css:map-styles</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_cx"><a class="fold pointer">cx:…</a> <span class="count">(2)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">library-1.0.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_cx_zip"><a href="cx_zip.html">cx:zip</a></p></li><li><p class="nav" id="nav_cx_message"><a href="cx_message.html">cx:message</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_docx2hub"><a class="fold pointer">docx2hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_docx2hub_convert"><a href="docx2hub_convert.html">docx2hub:convert</a></p></li><li><p class="nav" id="nav_docx2hub_single-tree"><a href="docx2hub_single-tree.html">docx2hub:single-tree</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_epub"><a class="fold pointer">epub:…</a> <span class="count">(6)</span></p><ul><li><p class="nav" id="nav_epub_convert"><a href="epub_convert.html">epub:convert</a></p></li><li><p class="nav" id="nav_epub_create-ocf"><a href="epub_create-ocf.html">epub:create-ocf</a></p></li><li><p class="nav" id="nav_epub_create-ops"><a href="epub_create-ops.html">epub:create-ops</a></p></li><li><p class="nav" id="nav_epub_html-splitter"><a href="epub_html-splitter.html">epub:html-splitter</a></p></li><li><p class="nav" id="nav_epub_create-opf"><a href="epub_create-opf.html">epub:create-opf</a></p></li><li><p class="nav" id="nav_epub_zip-package"><a href="epub_zip-package.html">epub:zip-package</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_hub"><a class="fold pointer">hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_hub_evolve-hub"><a href="hub_evolve-hub.html">hub:evolve-hub</a></p></li><li><p class="nav" id="nav_hub_evolve-hub_lists-by-indent"><a href="hub_evolve-hub_lists-by-indent.html">hub:evolve-hub_lists-by-indent</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_jats"><a class="fold pointer">jats:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_jats_hub2bits"><a href="jats_hub2bits.html">jats:hub2bits</a></p></li><li><p class="nav" id="nav_jats_html"><a href="jats_html.html">jats:html</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_p"><a class="fold pointer">p:…</a> <span class="count">(28)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">xproc-1.0.xpl (library)</a> <span class="count">(28)</span></p><ul><li><p class="nav" id="nav_p_add-attribute"><a href="p_add-attribute.html">p:add-attribute</a></p></li><li><p class="nav" id="nav_p_add-xml-base"><a href="p_add-xml-base.html">p:add-xml-base</a></p></li><li><p class="nav" id="nav_p_delete"><a href="p_delete.html">p:delete</a></p></li><li><p class="nav" id="nav_p_directory-list"><a href="p_directory-list.html">p:directory-list</a></p></li><li><p class="nav" id="nav_p_error"><a href="p_error.html">p:error</a></p></li><li><p class="nav" id="nav_p_filter"><a href="p_filter.html">p:filter</a></p></li><li><p class="nav" id="nav_p_http-request"><a href="p_http-request.html">p:http-request</a></p></li><li><p class="nav" id="nav_p_identity"><a href="p_identity.html">p:identity</a></p></li><li><p class="nav" id="nav_p_insert"><a href="p_insert.html">p:insert</a></p></li><li><p class="nav" id="nav_p_label-elements"><a href="p_label-elements.html">p:label-elements</a></p></li><li><p class="nav" id="nav_p_load"><a href="p_load.html">p:load</a></p></li><li><p class="nav" id="nav_p_pack"><a href="p_pack.html">p:pack</a></p></li><li><p class="nav" id="nav_p_parameters"><a href="p_parameters.html">p:parameters</a></p></li><li><p class="nav" id="nav_p_rename"><a href="p_rename.html">p:rename</a></p></li><li><p class="nav" id="nav_p_set-attributes"><a href="p_set-attributes.html">p:set-attributes</a></p></li><li><p class="nav" id="nav_p_sink"><a href="p_sink.html">p:sink</a></p></li><li><p class="nav" id="nav_p_split-sequence"><a href="p_split-sequence.html">p:split-sequence</a></p></li><li><p class="nav" id="nav_p_store"><a href="p_store.html">p:store</a></p></li><li><p class="nav" id="nav_p_string-replace"><a href="p_string-replace.html">p:string-replace</a></p></li><li><p class="nav" id="nav_p_unwrap"><a href="p_unwrap.html">p:unwrap</a></p></li><li><p class="nav" id="nav_p_wrap"><a href="p_wrap.html">p:wrap</a></p></li><li><p class="nav" id="nav_p_wrap-sequence"><a href="p_wrap-sequence.html">p:wrap-sequence</a></p></li><li><p class="nav" id="nav_p_xslt"><a href="p_xslt.html">p:xslt</a></p></li><li><p class="nav" id="nav_p_exec"><a href="p_exec.html">p:exec</a></p></li><li><p class="nav" id="nav_p_hash"><a href="p_hash.html">p:hash</a></p></li><li><p class="nav" id="nav_p_uuid"><a href="p_uuid.html">p:uuid</a></p></li><li><p class="nav" id="nav_p_validate-with-relax-ng"><a href="p_validate-with-relax-ng.html">p:validate-with-relax-ng</a></p></li><li><p class="nav" id="nav_p_validate-with-schematron"><a href="p_validate-with-schematron.html">p:validate-with-schematron</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_tr"><a class="fold pointer">tr:…</a> <span class="count">(25)</span></p><ul><li><p class="nav" id="nav_tr_file-uri"><a href="tr_file-uri.html">tr:file-uri</a></p></li><li><p class="nav" id="nav_tr_unescape-uri"><a href="tr_unescape-uri.html">tr:unescape-uri</a></p></li><li><p class="nav" id="nav_tr_xslt-mode"><a href="tr_xslt-mode.html">tr:xslt-mode</a></p></li><li><p class="nav" id="nav_tr_store-debug"><a href="tr_store-debug.html">tr:store-debug</a></p></li><li><p class="nav" id="nav_tr_prepend-xml-model"><a href="tr_prepend-xml-model.html">tr:prepend-xml-model</a></p></li><li><p class="nav" id="nav_tr_unzip"><a href="tr_unzip.html">tr:unzip</a></p></li><li><p class="nav" id="nav_tr_paths"><a href="tr_paths.html">tr:paths</a></p></li><li><p class="nav" id="nav_tr_dynamic-transformation-pipeline"><a href="tr_dynamic-transformation-pipeline.html">tr:dynamic-transformation-pipeline</a></p></li><li><p class="nav" id="nav_tr_remove-ns-decl-and-xml-base"><a href="tr_remove-ns-decl-and-xml-base.html">tr:remove-ns-decl-and-xml-base</a></p></li><li><p class="nav" id="nav_tr_check-styles"><a href="tr_check-styles.html">tr:check-styles</a></p></li><li><p class="nav" id="nav_tr_patch-svrl"><a href="tr_patch-svrl.html">tr:patch-svrl</a></p></li><li><p class="nav" id="nav_tr_html-embed-resources"><a href="tr_html-embed-resources.html">tr:html-embed-resources</a></p></li><li><p class="nav" id="nav_tr_oxy-validate-with-schematron"><a href="tr_oxy-validate-with-schematron.html">tr:oxy-validate-with-schematron</a></p></li><li><p class="nav" id="nav_tr_validate-with-rng"><a href="tr_validate-with-rng.html">tr:validate-with-rng</a></p></li><li><p class="nav" id="nav_tr_errorPI2svrl"><a href="tr_errorPI2svrl.html">tr:errorPI2svrl</a></p></li><li><p class="nav" id="nav_tr_validate-with-rng-PI"><a href="tr_validate-with-rng-PI.html">tr:validate-with-rng-PI</a></p></li><li><p class="nav" id="nav_tr_epubcheck-idpf"><a href="tr_epubcheck-idpf.html">tr:epubcheck-idpf</a></p></li><li><p class="toggle level3"><a class="fold pointer">load-cascaded.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_load-cascaded"><a href="tr_load-cascaded.html">tr:load-cascaded</a></p></li><li><p class="nav" id="nav_tr_load-whole-cascade"><a href="tr_load-whole-cascade.html">tr:load-whole-cascade</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">prepend-hub-xml-model.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_tr_prepend-hub-xml-model"><a href="tr_prepend-hub-xml-model.html">tr:prepend-hub-xml-model</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">simple-progress-msg.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_simple-progress-msg"><a href="tr_simple-progress-msg.html">tr:simple-progress-msg</a></p></li><li><p class="nav" id="nav_tr_propagate-caught-error"><a href="tr_propagate-caught-error.html">tr:propagate-caught-error</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">transpect-lib.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_tr_image-identify"><a href="tr_image-identify.html">tr:image-identify</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">validate-with-schematron.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_validate-with-schematron"><a href="tr_validate-with-schematron.html">tr:validate-with-schematron</a></p></li><li><p class="nav" id="nav_tr_validate-with-schematron2"><a href="tr_validate-with-schematron2.html">tr:validate-with-schematron2</a></p></li></ul></li></ul></li></ul></li><li><p class="toggle level1"><a class="fold pointer">Dynamic Evaluation Candidates</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_evolve-hubfallback"><a href="evolve-hubfallback.html">evolve-hub/fallback <span title="anonymous – this step has no type">Ⓐ</span><span title="dynamic – this is an example for a dynamically loaded or generated pipeline">Ⓓ</span></a></p></li></ul></li></ul></div><div id="main" class="macroblock"><h2>epub:create-ops <span class="name" id="step_create-ops">create-ops</span></h2><div class="file-path block"><p class="file-path">epubtools/modules/create-ops/xpl/create-ops.xpl</p><p class="file-path"> Import URI: ../modules/create-ops/xpl/create-ops.xpl</p></div><!--Something went wrong: no SVG representation available.--><div class="interface block input"><h3 class="toggle"><a class="pointer">Input Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">source</span><span class="flag primary" title="Primary port">Ⓟ</span></p></td><td></td><td><ul class="connections"><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/epub_convert.html#step_d250e174">epub:convert/tr:store-debug <span class="name">d250e174</span> result</a></li></ul></td></tr><tr><td><p class="port-declaration"><span class="name">conf</span><span class="flag sequence" title="Accepts a sequence of documents">Ⓢ</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">/hierarchy – may be included in /epub-config</p></div></td><td><ul class="connections"><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/epub_convert.html">epub:convert/c:file <span class="name">epub-convert</span> conf</a></li></ul></td></tr><tr><td><p class="port-declaration"><span class="name">meta</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">/epub-config</p></div></td><td><ul class="connections"><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/epub_convert.html">epub:convert/c:file <span class="name">epub-convert</span> meta</a></li></ul></td></tr></table></div><div class="interface block output"><h3 class="toggle"><a class="pointer">Output Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">result</span><span class="flag primary" title="Primary port">Ⓟ</span></p></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">html</span></p></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">files</span></p></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">report</span></p></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">splitting-report</span><span class="flag sequence" title="Accepts a sequence of documents">Ⓢ</span></p></td><td></td><td>
    
  </td></tr></table></div><div class="interface block option"><h3 class="toggle"><a class="pointer">Options</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Default</th></tr><tr><td><p class="option" id="option_base-uri"><span class="name">base-uri</span><span class="flag required" title="Required">Ⓡ</span></p></td><td></td><td><p></p></td></tr><tr><td><p class="option" id="option_target"><span class="name">target</span></p></td><td></td><td><p><span class="default">'EPUB2'</span></p></td></tr><tr><td><p class="option" id="option_css-filename"><span class="name">css-filename</span></p></td><td></td><td><p><span class="default">'stylesheet.css'</span></p></td></tr><tr><td><p class="option" id="option_use-svg"><span class="name">use-svg</span></p></td><td></td><td><p><span class="default">'yes'</span></p></td></tr><tr><td><p class="option" id="option_terminate-on-error"><span class="name">terminate-on-error</span></p></td><td></td><td><p><span class="default">'yes'</span></p></td></tr><tr><td><p class="option" id="option_debug"><span class="name">debug</span></p></td><td></td><td><p><span class="default">'no'</span></p></td></tr><tr><td><p class="option" id="option_debug-dir-uri"><span class="name">debug-dir-uri</span></p></td><td></td><td><p><span class="default">'debug'</span></p></td></tr></table></div><div class="subpipeline block"><h3 class="toggle"><a class="pointer">Subpipeline</a></h3><table><colgroup><col /><col /><col /><col /><col /><col /><col /><col class="name" /><col class="inputs" /><col class="outputs" /><col class="options" /></colgroup><tr><th colspan="8">Step</th><th>Inputs</th><th>Outputs</th><th>Options</th></tr><tr class="group"><td rowspan="75"><p class="rotate" title="p:group">p:group <span class="name" id="step_copy-resources">copy-resources</span></p></td><td colspan="7"></td><td></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_targetdir">targetdir</span></p></td><td><p><a href="#step_create-ops_port_source">source</a> on <a href="#step_create-ops">create-ops</a></p></td><td></td><td>replace($base-uri, '^(.*[/])+(.*)', '$1')</td></tr><tr><td colspan="7"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_css-handling">css-handling</span></p></td><td><p><a href="#step_create-ops_port_meta">meta</a> on <a href="#step_create-ops">create-ops</a></p></td><td></td><td>(/epub-config/@css-handling, 'regenerated-per-split')[1]</td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e77">d254e77</span></p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_create-ops_port_conf">conf</a> on <a href="#step_create-ops">create-ops</a></p>
      </dd></dl></td><td><p id="step_d254e77_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/hierarchy'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="cases"><td rowspan="9"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_image-info">image-info</span></p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="5"><p class="rotate" title="/epub-config/cover/@href">/epub-config/cover/@href</p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr><td colspan="5"><p class="names"><span class="type"><a href="tr_file-uri.html">tr:file-uri</a></span> <span class="name" id="step_fu">fu</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e77_port_result">result</a> on <a href="#step_d254e77">d254e77</a></p></dd><dt>resolver</dt><dd>
            <p>p:document<a href="http://transpect.io/xslt-util/xslt-based-catalog-resolver/xsl/resolve-uri-by-catalog.xsl">http://transpect.io/xslt-util/xslt-based-catalog-resolver/xsl/resolve-uri-by-catalog.xsl</a></p>
          </dd><dt>catalog</dt><dd>
            <p>p:document<a href="http://this.transpect.io/xmlcatalog/catalog.xml">http://this.transpect.io/xmlcatalog/catalog.xml</a></p>
          </dd></dl></td><td><p id="step_fu_port_result">result</p></td><td><p><a href="tr_file-uri.html#option_fetch-http">fetch-http</a> = 'true'</p><p><a href="tr_file-uri.html#option_make-unique">make-unique</a> = 'false'</p><p><a href="tr_file-uri.html#option_filename">filename</a> = resolve-uri($href, base-uri())</p></td></tr><tr><td colspan="5"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_replace-with-local">replace-with-local</span></p></td><td><dl><dt>source</dt><dd>
            <p><a href="#step_create-ops_port_meta">meta</a> on <a href="#step_create-ops">create-ops</a></p>
          </dd></dl></td><td><p id="step_replace-with-local_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'href'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/epub-config/cover'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = /*/@local-href</p></td></tr><tr><td colspan="5"><p class="names"><span class="type"><a href="tr_image-identify.html">tr:image-identify</a></span> <span class="name" id="step_ii">ii</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_replace-with-local_port_result">result</a> on <a href="#step_replace-with-local">replace-with-local</a></p></dd></dl></td><td><p id="step_ii_port_result">result</p></td><td><p><a href="tr_image-identify.html#option_href">href</a> = /epub-config/cover/@href</p></td></tr><tr class="local-end"><td colspan="5"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink1">sink1</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_ii_port_result">result</a> on <a href="#step_ii">ii</a></p></dd></dl></td><td></td><td></td></tr><tr class="even cond"><td rowspan="3"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr><td colspan="5"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name" id="step_i">i</span></p></td><td><dl><dt>source</dt><dd>
            <pre><code>
 &lt;c:error&gt;No /epub-config/cover/@href given&lt;/c:error&gt;      

</code></pre>
          </dd></dl></td><td><p id="step_i_port_result">result</p></td><td></td></tr><tr class="local-end"><td colspan="5"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink1-5">sink1-5</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_i_port_result">result</a> on <a href="#step_i">i</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e191">d254e191</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d254e191_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/cover-image-info'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink2">sink2</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e191_port_result">result</a> on <a href="#step_d254e191">d254e191</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e200">d254e200</span></p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_image-info_port_meta-with-uri-resolved-cover-href">meta-with-uri-resolved-cover-href</a> on <a href="#step_image-info">image-info</a></p>
      </dd></dl></td><td><p id="step_d254e200_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/epub-config'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink2a">sink2a</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e200_port_result">result</a> on <a href="#step_d254e200">d254e200</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_delete.html">p:delete</a></span> <span class="name" id="step_delete-dtd-artifacts">delete-dtd-artifacts</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Possible DTD parsing artifacts</p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_create-ops_port_source">source</a> on <a href="#step_create-ops">create-ops</a></p>
      </dd></dl></td><td><p id="step_delete-dtd-artifacts_port_result">result</p></td><td><p><a href="p_delete.html#option_match">match</a> = '/html:html/@version | /html:html/html:head/@profile'</p></td></tr><tr class="cases"><td rowspan="11"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_conditionally-check-hrefs">conditionally-check-hrefs</span></p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="8"><p class="rotate" title="/epub-config/checks/check[@param = 'epub-check-http-resources']/@value = 'true'">/epub-config/checks/check[@param = 'epub-check-http-resources']/@value = 'true'</p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr class="viewport"><td rowspan="7"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_check-hrefs">check-hrefs</span></p></td><td colspan="4"></td><td></td><td></td><td></td></tr><tr class="cases"><td rowspan="6"><p class="rotate" title="p:choose">p:choose <span class="name generated" id="step_d254e268">d254e268</span></p></td><td colspan="3"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="3"><p class="rotate" title="/*/@error-status">/*/@error-status</p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d254e277">d254e277</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_create-ops_port_source">source</a> on <a href="#step_create-ops">create-ops</a></p></dd></dl></td><td><p id="step_d254e277_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'error-status'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = /*/@error-status</p></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d254e285">d254e285</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e277_port_result">result</a> on <a href="#step_d254e277">d254e277</a></p></dd></dl></td><td><p id="step_d254e285_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'checked-href'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = /*/@href</p></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d254e296">d254e296</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_create-ops_port_source">source</a> on <a href="#step_create-ops">create-ops</a></p></dd></dl></td><td><p id="step_d254e296_port_result">result</p></td><td></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr><td colspan="5"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d254e306">d254e306</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_delete-dtd-artifacts_port_result">result</a> on <a href="#step_delete-dtd-artifacts">delete-dtd-artifacts</a></p></dd></dl></td><td><p id="step_d254e306_port_result">result</p></td><td></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d254e310">d254e310</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_attach-cover">attach-cover</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">If there is not yet a div with an id 'epub-cover-image-container',
      it will be inserted into the body as a first child.</p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_conditionally-check-hrefs_port_result">result</a> on <a href="#step_conditionally-check-hrefs">conditionally-check-hrefs</a></p>
        <p><a href="#step_image-info_port_meta-with-uri-resolved-cover-href">meta-with-uri-resolved-cover-href</a> on <a href="#step_image-info">image-info</a></p>
        <p><a href="#step_image-info_port_diagnostics">diagnostics</a> on <a href="#step_image-info">image-info</a></p>
        <p><a href="#step_image-info_port_file-uri">file-uri</a> on <a href="#step_image-info">image-info</a></p>
      </dd><dt>stylesheet</dt><dd>
        <p>p:document<a href="../xsl/attach-cover.xsl">../xsl/attach-cover.xsl</a></p>
      </dd></dl></td><td><p id="step_attach-cover_port_result">result</p></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e341">d254e341</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_attach-cover_port_result">result</a> on <a href="#step_attach-cover">attach-cover</a></p></dd></dl></td><td><p id="step_d254e341_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/cover-attached'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="css_parse.html">css:parse</a></span> <span class="name" id="step_css-parse0">css-parse0</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e341_port_result">result</a> on <a href="#step_d254e341">d254e341</a></p></dd><dt>stylesheet</dt><dd>
        <p xmlns:css="http://www.w3.org/1996/css" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">This stylesheet overwrites certain css:expand templates or variables. This is done because CSS3 isn't supported completely.</p><p xmlns:css="http://www.w3.org/1996/css" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">In that stylesheet text-decoration and other porperties can be changed to supported values. When CSS3 is supported it might be necessary to use this input port dynamically.</p>
        <p>p:document<a href="http://transpect.io/css-tools/xsl/css2-1-parser.xsl">http://transpect.io/css-tools/xsl/css2-1-parser.xsl</a></p>
      </dd></dl></td><td><p id="step_css-parse0_port_result">result</p></td><td><p><a href="css_parse.html#option_debug">debug</a> = $debug</p><p><a href="css_parse.html#option_debug-dir-uri">debug-dir-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_css-parse1">css-parse1</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_css-parse0_port_result">result</a> on <a href="#step_css-parse0">css-parse0</a></p></dd></dl></td><td><p id="step_css-parse1_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'xml:base'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = concat( $targetdir, 'epub/OEBPS/styles/', $css-filename)</p></td></tr><tr class="viewport"><td rowspan="1"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_resolve-resource-uris">resolve-resource-uris</span></p></td><td colspan="6"></td><td></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e402">d254e402</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_d254e402_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/resolve-resource-uris'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink3">sink3</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e402_port_result">result</a> on <a href="#step_d254e402">d254e402</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_generate-filelist">generate-filelist</span></p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_attach-cover_port_result">result</a> on <a href="#step_attach-cover">attach-cover</a></p>
        <p><a href="#step_resolve-resource-uris_port_result">result</a> on <a href="#step_resolve-resource-uris">resolve-resource-uris</a></p>
      </dd><dt>stylesheet</dt><dd>
        <p>p:document<a href="../xsl/extract-filerefs.xsl">../xsl/extract-filerefs.xsl</a></p>
      </dd></dl></td><td><p id="step_generate-filelist_port_result">result</p></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e433">d254e433</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_generate-filelist_port_result">result</a> on <a href="#step_generate-filelist">generate-filelist</a></p></dd></dl></td><td><p id="step_d254e433_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/filelist'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d254e440">d254e440</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e433_port_result">result</a> on <a href="#step_d254e433">d254e433</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_css-parse">css-parse</span></p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_resolve-resource-uris_port_result">result</a> on <a href="#step_resolve-resource-uris">resolve-resource-uris</a></p>
        <p><a href="#step_generate-filelist_port_result">result</a> on <a href="#step_generate-filelist">generate-filelist</a></p>
      </dd><dt>parameters</dt><dd><p>p:empty</p></dd><dt>stylesheet</dt><dd>
        <p>p:document<a href="../xsl/add-local-resource-paths-to-css.xsl">../xsl/add-local-resource-paths-to-css.xsl</a></p>
      </dd></dl></td><td><p id="step_css-parse_port_result">result</p></td><td></td></tr><tr><td colspan="7"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e460">d254e460</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_css-parse_port_result">result</a> on <a href="#step_css-parse">css-parse</a></p></dd></dl></td><td><p id="step_d254e460_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/parse-css'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="7"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d254e467">d254e467</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e460_port_result">result</a> on <a href="#step_d254e460">d254e460</a></p></dd></dl></td><td></td><td></td></tr><tr class="viewport"><td rowspan="32"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_file-iteration">file-iteration</span></p></td><td colspan="6"></td><td id="step_file-iteration_port_current">
        <p><a href="#step_generate-filelist_port_result">result</a> on <a href="#step_generate-filelist">generate-filelist</a></p>
      </td><td></td><td></td></tr><tr><td colspan="6"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_uri">uri</span></p></td><td></td><td></td><td>(/c:file/@href, /c:file/@oebps-name)[1]</td></tr><tr class="cases"><td rowspan="30"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_http-or-file">http-or-file</span></p></td><td colspan="5"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="17"><p class="rotate" title="matches($uri, 'https?:')">matches($uri, 'https?:')</p></td><td colspan="4"></td><td></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d254e505">d254e505</span></p></td><td><dl><dt>source</dt><dd>
              <pre><code>
 &lt;c:request method="GET"/&gt;

</code></pre>
            </dd></dl></td><td><p id="step_d254e505_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/c:request'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'href'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = $uri</p></td></tr><tr class="try"><td rowspan="6"><p class="rotate" title="p:try">p:try <span class="name" id="step_http-request">http-request</span></p></td><td colspan="3"></td><td></td><td></td><td></td></tr><tr class="group"><td rowspan="3"><p class="rotate" title="p:group">p:group <span class="name generated" id="step_d254e520">d254e520</span></p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_http-request.html">p:http-request</a></span> <span class="name generated" id="step_d254e524">d254e524</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e505_port_result">result</a> on <a href="#step_d254e505">d254e505</a></p></dd></dl></td><td><p id="step_d254e524_port_result">result</p></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e526">d254e526</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e524_port_result">result</a> on <a href="#step_d254e524">d254e524</a></p></dd></dl></td><td><p id="step_d254e526_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = concat('epubtools/create-ops/http-requests/', c:file/@name)</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="catch"><td rowspan="2"><p class="rotate" title="p:catch">p:catch <span class="name" id="step_catch">catch</span></p></td><td colspan="2"></td><td><p id="step_catch_port_error">error</p></td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d254e543">d254e543</span></p></td><td><dl><dt>source</dt><dd>
                  <p><a href="#step_catch_port_error">error</a> on <a href="#step_catch">catch</a></p>
                </dd></dl></td><td><p id="step_d254e543_port_result">result</p></td><td></td></tr><tr class="local-end"><td colspan="4"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink5">sink5</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d254e556">d254e556</span></p></td><td><dl><dt>source</dt><dd>
              <p><a href="#step_file-iteration_port_current">current</a> on <a href="#step_file-iteration">file-iteration</a></p>
            </dd></dl></td><td><p id="step_d254e556_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'query-hash'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = ''</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_hash.html">p:hash</a></span> <span class="name" id="step_hashing">hashing</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e556_port_result">result</a> on <a href="#step_d254e556">d254e556</a></p></dd><dt>parameters</dt><dd><p>p:empty</p></dd></dl></td><td><p id="step_hashing_port_result">result</p></td><td><p><a href="p_hash.html#option_algorithm">algorithm</a> = 'crc'</p><p><a href="p_hash.html#option_match">match</a> = '@query-hash'</p><p><a href="p_hash.html#option_value">value</a> = /*/@query-string</p></td></tr><tr class="local-end"><td colspan="4"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink6">sink6</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_hashing_port_result">result</a> on <a href="#step_hashing">hashing</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_apply-hash">apply-hash</span></p></td><td><dl><dt>source</dt><dd>
              <p><a href="#step_hashing_port_result">result</a> on <a href="#step_hashing">hashing</a></p>
              <p><a href="#step_http-request_port_result">result</a> on <a href="#step_http-request">http-request</a></p>
            </dd><dt>parameters</dt><dd>
              <p>p:empty</p>
            </dd><dt>stylesheet</dt><dd>
              <p>p:document<a href="../xsl/apply-hash.xsl">../xsl/apply-hash.xsl</a></p>
            </dd></dl></td><td><p id="step_apply-hash_port_result">result</p></td><td></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e594">d254e594</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_apply-hash_port_result">result</a> on <a href="#step_apply-hash">apply-hash</a></p></dd></dl></td><td><p id="step_d254e594_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = concat('epubtools/create-ops/files/', c:file/@name)</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="p_store.html">p:store</a></span> <span class="name" id="step_store-http-resource">store-http-resource</span></p></td><td><dl><dt>source</dt><dd>
              <p><a href="#step_http-request_port_result">result</a> on <a href="#step_http-request">http-request</a></p>
            </dd></dl></td><td><p id="step_store-http-resource_port_result">result</p></td><td><p><a href="p_store.html#option_href">href</a> = c:file/@target-filename</p></td></tr><tr><td colspan="4"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e620">d254e620</span></p></td><td><dl><dt>source</dt><dd>
              <p><a href="#step_apply-hash_port_result">result</a> on <a href="#step_apply-hash">apply-hash</a></p>
            </dd></dl></td><td><p id="step_d254e620_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = concat('epubtools/create-ops/filelist-after-patch/', c:file/@name)</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="4"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d254e637">d254e637</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e620_port_result">result</a> on <a href="#step_d254e620">d254e620</a></p></dd></dl></td><td></td><td></td></tr><tr class="even cond"><td rowspan="12"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="4"></td><td></td><td></td><td></td></tr><tr class="try"><td rowspan="10"><p class="rotate" title="p:try">p:try <span class="name" id="step_try-copy">try-copy</span></p></td><td colspan="3"></td><td></td><td></td><td></td></tr><tr class="group"><td rowspan="4"><p class="rotate" title="p:group">p:group <span class="name generated" id="step_d254e649">d254e649</span></p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr class="local-end"><td colspan="2"><p class="names"><span class="type"><a href=".html">cxf:info</a></span> <span class="name" id="step_file-exists">file-exists</span></p></td><td></td><td></td><td><p>href = c:file/@local-href</p></td></tr><tr class="foreach"><td rowspan="2"><p class="rotate" title="p:for-each">p:for-each <span class="name" id="step_copy">copy</span></p></td><td colspan="1"></td><td id="step_copy_port_current"></td><td></td><td></td></tr><tr class="local-end"><td colspan="1"><p class="names"><span class="type"><a href=".html">cxf:copy</a></span> <span class="name" id="step_cp">cp</span></p></td><td></td><td></td><td><p>fail-on-error = if ($terminate-on-error = 'yes') then 'true' else 'false'</p><p>target = c:file/@target-filename</p><p>href = c:file/@local-href</p></td></tr><tr class="catch"><td rowspan="5"><p class="rotate" title="p:catch">p:catch <span class="name" id="step_catch">catch</span></p></td><td colspan="2"></td><td><p id="step_catch_port_error">error</p></td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e695">d254e695</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_catch_port_error">error</a> on <a href="#step_catch">catch</a></p>
                </dd></dl></td><td><p id="step_d254e695_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/copy-error'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_store.html">p:store</a></span> <span class="name" id="step_dummy">dummy</span></p></td><td><dl><dt>source</dt><dd>
                  <pre><code>&lt;dummy&gt;1&lt;/dummy&gt;
</code></pre>
                </dd></dl></td><td><p id="step_dummy_port_result">result</p></td><td><p><a href="p_store.html#option_method">method</a> = 'text'</p><p><a href="p_store.html#option_href">href</a> = c:file/@target-filename</p></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_is-text-file">is-text-file</span></p></td><td><dl><dt>source</dt><dd>
                  <p><a href="#step_file-iteration_port_current">current</a> on <a href="#step_file-iteration">file-iteration</a></p>  
                </dd></dl></td><td><p id="step_is-text-file_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'media-type'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = 'text/plain'</p><p><a href="p_add-attribute.html#option_match">match</a> = '/c:file'</p></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_is-error">is-error</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_is-text-file_port_result">result</a> on <a href="#step_is-text-file">is-text-file</a></p></dd></dl></td><td><p id="step_is-error_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'error'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = 'File not found (or copying failed for another reason)'</p></td></tr><tr class="local-end"><td colspan="4"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink6-5">sink6-5</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr class="viewport"><td rowspan="1"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_ii-content0">ii-content0</span></p></td><td colspan="7"></td><td></td><td></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name" id="step_ii-content">ii-content</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td><p id="step_ii-content_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/image-identify-content'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="8"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink7">sink7</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_ii-content_port_result">result</a> on <a href="#step_ii-content">ii-content</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_validate-with-relax-ng.html">p:validate-with-relax-ng</a></span> <span class="name" id="step_validate-metadata-conf">validate-metadata-conf</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_copy-resources_port_meta-with-uri-resolved-cover-href">meta-with-uri-resolved-cover-href</a> on <a href="#step_copy-resources">copy-resources</a></p>
    </dd><dt>schema</dt><dd>
      <p>p:document<a href="../../../schema/metadata-conf/metadata-conf.rng">../../../schema/metadata-conf/metadata-conf.rng</a></p>
    </dd></dl></td><td><p id="step_validate-metadata-conf_port_result">result</p></td><td><p><a href="p_validate-with-relax-ng.html#option_assert-valid">assert-valid</a> = if ($terminate-on-error = 'yes') then 'true' else 'false'</p></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e803">d254e803</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_validate-metadata-conf_port_result">result</a> on <a href="#step_validate-metadata-conf">validate-metadata-conf</a></p></dd></dl></td><td><p id="step_d254e803_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/validate-metadata-conf'</p><p><a href="tr_store-debug.html#option_extension">extension</a> = 'xml'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="8"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink-valhierarchy">sink-valhierarchy</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e803_port_result">result</a> on <a href="#step_d254e803">d254e803</a></p></dd></dl></td><td></td><td></td></tr><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Hashed file names are patched into the HTML before split</p><tr><td colspan="8"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_patch-http-hrefs">patch-http-hrefs</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_copy-resources_port_html">html</a> on <a href="#step_copy-resources">copy-resources</a></p>
      <p><a href="#step_ii-content_port_result">result</a> on <a href="#step_ii-content">ii-content</a></p>
    </dd><dt>parameters</dt><dd>
      <p>p:empty</p>
    </dd><dt>stylesheet</dt><dd>
      <p>p:document<a href="../xsl/patch-http-hrefs.xsl">../xsl/patch-http-hrefs.xsl</a></p>
    </dd></dl></td><td><p id="step_patch-http-hrefs_port_result">result</p></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_delete.html">p:delete</a></span> <span class="name generated" id="step_d254e831">d254e831</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Remove artifacts from link checking</p></td><td><dl><dt>source</dt><dd><p><a href="#step_patch-http-hrefs_port_result">result</a> on <a href="#step_patch-http-hrefs">patch-http-hrefs</a></p></dd></dl></td><td><p id="step_d254e831_port_result">result</p></td><td><p><a href="p_delete.html#option_match">match</a> = '@error-status | @checked-href'</p></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e836">d254e836</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e831_port_result">result</a> on <a href="#step_d254e831">d254e831</a></p></dd></dl></td><td><p id="step_d254e836_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/pre-split'</p><p><a href="tr_store-debug.html#option_extension">extension</a> = 'html'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="epub_html-splitter.html">epub:html-splitter</a></span> <span class="name" id="step_html-splitter">html-splitter</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e836_port_result">result</a> on <a href="#step_d254e836">d254e836</a></p></dd><dt>conf</dt><dd>
      <p><a href="#step_create-ops_port_conf">conf</a> on <a href="#step_create-ops">create-ops</a></p>
    </dd><dt>meta</dt><dd>
      <p><a href="#step_copy-resources_port_meta-with-uri-resolved-cover-href">meta-with-uri-resolved-cover-href</a> on <a href="#step_copy-resources">copy-resources</a></p>
    </dd><dt>css-xml</dt><dd>
      <p><a href="#step_copy-resources_port_css-xml">css-xml</a> on <a href="#step_copy-resources">copy-resources</a></p>
    </dd></dl></td><td><p id="step_html-splitter_port_result">result</p></td><td><p><a href="epub_html-splitter.html#option_base-uri">base-uri</a> = $base-uri</p><p><a href="epub_html-splitter.html#option_target">target</a> = $target</p><p><a href="epub_html-splitter.html#option_debug">debug</a> = $debug</p><p><a href="epub_html-splitter.html#option_debug-dir-uri">debug-dir-uri</a> = $debug-dir-uri</p></td></tr><tr class="viewport"><td rowspan="1"><p class="rotate" title="p:viewport">p:viewport <span class="name" id="step_html-file-size">html-file-size</span></p></td><td colspan="7"></td><td id="step_html-file-size_port_current">
      <p><a href="#step_html-splitter_port_files">files</a> on <a href="#step_html-splitter">html-splitter</a></p>
    </td><td></td><td></td></tr><tr class="local-end"><td colspan="8"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d254e901">d254e901</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_xslt.html">p:xslt</a></span> <span class="name" id="step_prune-filelist">prune-filelist</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">If CSS handling is set to 'regenerate-per-split', the splitter will return a css:css document
    with XML representations of @font-face at rules (and potentially other stuff, such as background images) that
    was detected as being unutilized in any of the split HTML file. We may now remove the local URLs from the file
    list that correspond to //css:resource/@href attributes in the document on the splitter’s unused-css-resources 
    port.</p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_ii-content_port_result">result</a> on <a href="#step_ii-content">ii-content</a></p>
      <p><a href="#step_html-splitter_port_unused-css-resources">unused-css-resources</a> on <a href="#step_html-splitter">html-splitter</a></p>
    </dd><dt>parameters</dt><dd>
      <p>p:empty</p>
    </dd><dt>stylesheet</dt><dd>
      <pre><code>
 &lt;xsl:stylesheet version="2.0"&gt;
   &lt;xsl:variable name="resource-hrefs" as="xs:string*" select="collection()//css:resource/@href"/&gt;
   &lt;xsl:template match="*|@*"&gt;
     &lt;xsl:copy copy-namespaces="no"&gt;
       &lt;xsl:apply-templates select="@*, node()"/&gt;
     &lt;/xsl:copy&gt;
   &lt;/xsl:template&gt;
   &lt;xsl:template match="c:file[@href = $resource-hrefs]"/&gt;
 &lt;/xsl:stylesheet&gt;

</code></pre>
    </dd></dl></td><td><p id="step_prune-filelist_port_result">result</p></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_wrap-sequence.html">p:wrap-sequence</a></span> <span class="name generated" id="step_d254e940">d254e940</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_prune-filelist_port_result">result</a> on <a href="#step_prune-filelist">prune-filelist</a></p>
      <p><a href="#step_html-file-size_port_result">result</a> on <a href="#step_html-file-size">html-file-size</a></p>
    </dd></dl></td><td><p id="step_d254e940_port_result">result</p></td><td><p><a href="p_wrap-sequence.html#option_wrapper">wrapper</a> = 'cx:document'</p></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d254e949">d254e949</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e940_port_result">result</a> on <a href="#step_d254e940">d254e940</a></p></dd></dl></td><td><p id="step_d254e949_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'name'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = 'wrap-file-uris'</p></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name" id="step_wrap-file-uris">wrap-file-uris</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e949_port_result">result</a> on <a href="#step_d254e949">d254e949</a></p></dd></dl></td><td><p id="step_wrap-file-uris_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/wrap-file-uris'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="8"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name" id="step_sink10">sink10</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_wrap-file-uris_port_result">result</a> on <a href="#step_wrap-file-uris">wrap-file-uris</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="8"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d254e957">d254e957</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_html-splitter_port_result">result</a> on <a href="#step_html-splitter">html-splitter</a></p>
    </dd></dl></td><td><p id="step_d254e957_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/create-ops/wrap-files'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="8"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d254e968">d254e968</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d254e957_port_result">result</a> on <a href="#step_d254e957">d254e957</a></p></dd></dl></td><td></td><td></td></tr></table></div><div class="interface block use"><h3 class="toggle"><a class="pointer">Used by</a></h3><ul><li><p class="nav" id="nav_epub_convert">declare-step <a href="epub_convert.html">epub:convert</a></p></li></ul></div></div></div></div></body></html>