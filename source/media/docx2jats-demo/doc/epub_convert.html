<?xml version="1.0" encoding="UTF-8"?><html xmlns:p="http://www.w3.org/ns/xproc" xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:rng="http://relaxng.org/ns/structure/1.0" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" type="text/css" href="transpectdoc.css" /><link rel="stylesheet" type="text/css" href="highlight/styles/default.css" /><script src="jquery.js"></script><script src="highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript" src="transpectdoc.js"></script><title>epub:convert – transpectdoc</title></head><body><div id="transpectdoc"><div id="epub_convert" class="id-container"><div id="nav" class="macroblock"><h1>docx2jats-demo</h1><ul class="nav"><li><p class="toggle level1" id="nav_frontend"><a class="fold pointer">Frontend Pipelines</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_docx2jats"><a href="docx2jats.html">docx2jats <span title="anonymous – this step has no type">Ⓐ</span></a></p></li></ul></li><li><p class="toggle level1" id="nav_typedSteps"><a class="fold pointer">Step Declarations</a> <span class="count">(72)</span></p><ul><li><p class="toggle level2" id="nav_namespaceSteps_css"><a class="fold pointer">css:…</a> <span class="count">(5)</span></p><ul><li><p class="nav" id="nav_css_generate"><a href="css_generate.html">css:generate</a></p></li><li><p class="toggle level3"><a class="fold pointer">css.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_css_parse"><a href="css_parse.html">css:parse</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">map-style-names.xpl (library)</a> <span class="count">(3)</span></p><ul><li><p class="nav" id="nav_css_consolidate-maps"><a href="css_consolidate-maps.html">css:consolidate-maps</a></p></li><li><p class="nav" id="nav_css_apply-map"><a href="css_apply-map.html">css:apply-map</a></p></li><li><p class="nav" id="nav_css_map-styles"><a href="css_map-styles.html">css:map-styles</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_cx"><a class="fold pointer">cx:…</a> <span class="count">(2)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">library-1.0.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_cx_zip"><a href="cx_zip.html">cx:zip</a></p></li><li><p class="nav" id="nav_cx_message"><a href="cx_message.html">cx:message</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_docx2hub"><a class="fold pointer">docx2hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_docx2hub_convert"><a href="docx2hub_convert.html">docx2hub:convert</a></p></li><li><p class="nav" id="nav_docx2hub_single-tree"><a href="docx2hub_single-tree.html">docx2hub:single-tree</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_epub"><a class="fold pointer">epub:…</a> <span class="count">(6)</span></p><ul><li><p class="nav" id="nav_epub_convert"><a href="epub_convert.html">epub:convert</a></p></li><li><p class="nav" id="nav_epub_create-ocf"><a href="epub_create-ocf.html">epub:create-ocf</a></p></li><li><p class="nav" id="nav_epub_create-ops"><a href="epub_create-ops.html">epub:create-ops</a></p></li><li><p class="nav" id="nav_epub_html-splitter"><a href="epub_html-splitter.html">epub:html-splitter</a></p></li><li><p class="nav" id="nav_epub_create-opf"><a href="epub_create-opf.html">epub:create-opf</a></p></li><li><p class="nav" id="nav_epub_zip-package"><a href="epub_zip-package.html">epub:zip-package</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_hub"><a class="fold pointer">hub:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_hub_evolve-hub"><a href="hub_evolve-hub.html">hub:evolve-hub</a></p></li><li><p class="nav" id="nav_hub_evolve-hub_lists-by-indent"><a href="hub_evolve-hub_lists-by-indent.html">hub:evolve-hub_lists-by-indent</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_jats"><a class="fold pointer">jats:…</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_jats_hub2bits"><a href="jats_hub2bits.html">jats:hub2bits</a></p></li><li><p class="nav" id="nav_jats_html"><a href="jats_html.html">jats:html</a></p></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_p"><a class="fold pointer">p:…</a> <span class="count">(28)</span></p><ul><li><p class="toggle level3"><a class="fold pointer">xproc-1.0.xpl (library)</a> <span class="count">(28)</span></p><ul><li><p class="nav" id="nav_p_add-attribute"><a href="p_add-attribute.html">p:add-attribute</a></p></li><li><p class="nav" id="nav_p_add-xml-base"><a href="p_add-xml-base.html">p:add-xml-base</a></p></li><li><p class="nav" id="nav_p_delete"><a href="p_delete.html">p:delete</a></p></li><li><p class="nav" id="nav_p_directory-list"><a href="p_directory-list.html">p:directory-list</a></p></li><li><p class="nav" id="nav_p_error"><a href="p_error.html">p:error</a></p></li><li><p class="nav" id="nav_p_filter"><a href="p_filter.html">p:filter</a></p></li><li><p class="nav" id="nav_p_http-request"><a href="p_http-request.html">p:http-request</a></p></li><li><p class="nav" id="nav_p_identity"><a href="p_identity.html">p:identity</a></p></li><li><p class="nav" id="nav_p_insert"><a href="p_insert.html">p:insert</a></p></li><li><p class="nav" id="nav_p_label-elements"><a href="p_label-elements.html">p:label-elements</a></p></li><li><p class="nav" id="nav_p_load"><a href="p_load.html">p:load</a></p></li><li><p class="nav" id="nav_p_pack"><a href="p_pack.html">p:pack</a></p></li><li><p class="nav" id="nav_p_parameters"><a href="p_parameters.html">p:parameters</a></p></li><li><p class="nav" id="nav_p_rename"><a href="p_rename.html">p:rename</a></p></li><li><p class="nav" id="nav_p_set-attributes"><a href="p_set-attributes.html">p:set-attributes</a></p></li><li><p class="nav" id="nav_p_sink"><a href="p_sink.html">p:sink</a></p></li><li><p class="nav" id="nav_p_split-sequence"><a href="p_split-sequence.html">p:split-sequence</a></p></li><li><p class="nav" id="nav_p_store"><a href="p_store.html">p:store</a></p></li><li><p class="nav" id="nav_p_string-replace"><a href="p_string-replace.html">p:string-replace</a></p></li><li><p class="nav" id="nav_p_unwrap"><a href="p_unwrap.html">p:unwrap</a></p></li><li><p class="nav" id="nav_p_wrap"><a href="p_wrap.html">p:wrap</a></p></li><li><p class="nav" id="nav_p_wrap-sequence"><a href="p_wrap-sequence.html">p:wrap-sequence</a></p></li><li><p class="nav" id="nav_p_xslt"><a href="p_xslt.html">p:xslt</a></p></li><li><p class="nav" id="nav_p_exec"><a href="p_exec.html">p:exec</a></p></li><li><p class="nav" id="nav_p_hash"><a href="p_hash.html">p:hash</a></p></li><li><p class="nav" id="nav_p_uuid"><a href="p_uuid.html">p:uuid</a></p></li><li><p class="nav" id="nav_p_validate-with-relax-ng"><a href="p_validate-with-relax-ng.html">p:validate-with-relax-ng</a></p></li><li><p class="nav" id="nav_p_validate-with-schematron"><a href="p_validate-with-schematron.html">p:validate-with-schematron</a></p></li></ul></li></ul></li><li><p class="toggle level2" id="nav_namespaceSteps_tr"><a class="fold pointer">tr:…</a> <span class="count">(25)</span></p><ul><li><p class="nav" id="nav_tr_file-uri"><a href="tr_file-uri.html">tr:file-uri</a></p></li><li><p class="nav" id="nav_tr_unescape-uri"><a href="tr_unescape-uri.html">tr:unescape-uri</a></p></li><li><p class="nav" id="nav_tr_xslt-mode"><a href="tr_xslt-mode.html">tr:xslt-mode</a></p></li><li><p class="nav" id="nav_tr_store-debug"><a href="tr_store-debug.html">tr:store-debug</a></p></li><li><p class="nav" id="nav_tr_prepend-xml-model"><a href="tr_prepend-xml-model.html">tr:prepend-xml-model</a></p></li><li><p class="nav" id="nav_tr_unzip"><a href="tr_unzip.html">tr:unzip</a></p></li><li><p class="nav" id="nav_tr_paths"><a href="tr_paths.html">tr:paths</a></p></li><li><p class="nav" id="nav_tr_dynamic-transformation-pipeline"><a href="tr_dynamic-transformation-pipeline.html">tr:dynamic-transformation-pipeline</a></p></li><li><p class="nav" id="nav_tr_remove-ns-decl-and-xml-base"><a href="tr_remove-ns-decl-and-xml-base.html">tr:remove-ns-decl-and-xml-base</a></p></li><li><p class="nav" id="nav_tr_check-styles"><a href="tr_check-styles.html">tr:check-styles</a></p></li><li><p class="nav" id="nav_tr_patch-svrl"><a href="tr_patch-svrl.html">tr:patch-svrl</a></p></li><li><p class="nav" id="nav_tr_html-embed-resources"><a href="tr_html-embed-resources.html">tr:html-embed-resources</a></p></li><li><p class="nav" id="nav_tr_oxy-validate-with-schematron"><a href="tr_oxy-validate-with-schematron.html">tr:oxy-validate-with-schematron</a></p></li><li><p class="nav" id="nav_tr_validate-with-rng"><a href="tr_validate-with-rng.html">tr:validate-with-rng</a></p></li><li><p class="nav" id="nav_tr_errorPI2svrl"><a href="tr_errorPI2svrl.html">tr:errorPI2svrl</a></p></li><li><p class="nav" id="nav_tr_validate-with-rng-PI"><a href="tr_validate-with-rng-PI.html">tr:validate-with-rng-PI</a></p></li><li><p class="nav" id="nav_tr_epubcheck-idpf"><a href="tr_epubcheck-idpf.html">tr:epubcheck-idpf</a></p></li><li><p class="toggle level3"><a class="fold pointer">load-cascaded.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_load-cascaded"><a href="tr_load-cascaded.html">tr:load-cascaded</a></p></li><li><p class="nav" id="nav_tr_load-whole-cascade"><a href="tr_load-whole-cascade.html">tr:load-whole-cascade</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">prepend-hub-xml-model.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_tr_prepend-hub-xml-model"><a href="tr_prepend-hub-xml-model.html">tr:prepend-hub-xml-model</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">simple-progress-msg.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_simple-progress-msg"><a href="tr_simple-progress-msg.html">tr:simple-progress-msg</a></p></li><li><p class="nav" id="nav_tr_propagate-caught-error"><a href="tr_propagate-caught-error.html">tr:propagate-caught-error</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">transpect-lib.xpl (library)</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_tr_image-identify"><a href="tr_image-identify.html">tr:image-identify</a></p></li></ul></li><li><p class="toggle level3"><a class="fold pointer">validate-with-schematron.xpl (library)</a> <span class="count">(2)</span></p><ul><li><p class="nav" id="nav_tr_validate-with-schematron"><a href="tr_validate-with-schematron.html">tr:validate-with-schematron</a></p></li><li><p class="nav" id="nav_tr_validate-with-schematron2"><a href="tr_validate-with-schematron2.html">tr:validate-with-schematron2</a></p></li></ul></li></ul></li></ul></li><li><p class="toggle level1"><a class="fold pointer">Dynamic Evaluation Candidates</a> <span class="count">(1)</span></p><ul><li><p class="nav" id="nav_evolve-hubfallback"><a href="evolve-hubfallback.html">evolve-hub/fallback <span title="anonymous – this step has no type">Ⓐ</span><span title="dynamic – this is an example for a dynamically loaded or generated pipeline">Ⓓ</span></a></p></li></ul></li></ul></div><div id="main" class="macroblock"><h2>epub:convert <span class="name" id="step_epub-convert">epub-convert</span></h2><div class="file-path block"><p class="file-path">epubtools/xpl/epub-convert.xpl</p><p class="file-path"> Import URI: http://transpect.io/epubtools/xpl/epub-convert.xpl</p></div><div class="documentation block"> 
    <p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">This step takes a HTML file as input and converts it to an epub file. You need a configuration for the HTML splitting and
      the OPF metadata. Examples can be found in the sample directory. Invoke this step on the command line with:</p>
    <pre xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io"><code>calabash/calabash.sh -i source=sample/b978-3-646-92351-3.xhtml 
  -i conf=sample/hierarchy.xml -i meta=sample/epub-config.xml epub-convert.xpl </code></pre>
    <p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Note that it’s advisable to make all file inputs absolute URIs, by using <code>cygpath</code> on Cygwin or <code>readlink -f</code>
    on Unixy systems. For bash, this is, e.g., <code>source=file:/$(cygpath -ma sample/b978-3-646-92351-3.xhtml)</code> </p>
  </div><!--Something went wrong: no SVG representation available.--><div class="interface block input"><h3 class="toggle"><a class="pointer">Input Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">source</span><span class="flag primary" title="Primary port">Ⓟ</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">An XHTML file (Version number irrelevant; will be output as 1.1), either loaded from a physical location on
      disk or, alternatively, with its base URI set in an /*/@xml:base attribute. It is important that the source document have
      a base URI because the locations of all referenced files (CSS, images) will be determined relative to this base
      URI.</p></div></td><td><ul class="connections"><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/docx2jats.html#step_html-add-xml-base">docx2jats  Ⓐ/p:add-attribute <span class="name">html-add-xml-base</span> result</a></li></ul></td></tr><tr><td><p class="port-declaration"><span class="name">conf</span><span class="flag sequence" title="Accepts a sequence of documents">Ⓢ</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">/hierarchy, config file for HTML splitter (see sample/hierarchy.xml).</p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">May be included in meta port doc as /epub-config/hierarchy so
      you don’t have to submit an extra document to this port</p></div></td><td></td></tr><tr><td><p class="port-declaration"><span class="name">meta</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">/epub-config – an EPUB file’s metadata and other configuration settings (see sample/epub-config.xml for an example).</p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Please note that the name “meta” is misleading since the file contains more than just metadata.</p></div></td><td><ul class="connections"><li><a href="file:/C:/cygwin/home/gerrit/XML/Prague/2016/transpect-tutorial/docx2jats-demo/doc/docx2jats.html#step_epub-conf">docx2jats  Ⓐ/p:string-replace <span class="name">epub-conf</span> result</a></li></ul></td></tr><tr><td><p class="port-declaration"><span class="name">schematron</span></p></td><td></td><td><ul class="connections"><li>Default document: <code>../schematron/epub.sch.xml</code></li></ul></td></tr><tr><td><p class="port-declaration"><span class="name">custom-schematron</span><span class="flag sequence" title="Accepts a sequence of documents">Ⓢ</span></p></td><td><div class="documentation"><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Additional Schematron checks. See debug/epubtools/input-for-schematron.xml for an example of 
      the input format (after running this once with debug=yes). The Schematron files should have a /*/@tr:rule-family
    attribute that identifies the schema’s rule set for the purpose of report generation.</p></div></td><td></td></tr></table></div><div class="interface block output"><h3 class="toggle"><a class="pointer">Output Ports</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Connections</th></tr><tr><td><p class="port-declaration"><span class="name">result</span><span class="flag primary" title="Primary port">Ⓟ</span></p><p:serialization xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io" port="result" method="xml" encoding="UTF-8" indent="true" omit-xml-declaration="false"></p:serialization></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">chunks</span></p><p:serialization xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io" port="chunks" method="xml" encoding="UTF-8" indent="true" omit-xml-declaration="false"></p:serialization></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">opf</span></p><p:serialization xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io" port="opf" method="xml" encoding="UTF-8" indent="true" omit-xml-declaration="false"></p:serialization></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">files</span></p><p:serialization xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io" port="files" method="xml" encoding="UTF-8" indent="true" omit-xml-declaration="false"></p:serialization></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">report</span><span class="flag sequence" title="Accepts a sequence of documents">Ⓢ</span></p></td><td></td><td>
    
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">html</span></p></td><td></td><td>
    
  </td></tr><tr><td><p class="port-declaration"><span class="name">baseuri</span></p></td><td></td><td>
		
	</td></tr><tr><td><p class="port-declaration"><span class="name">input-for-schematron</span></p></td><td></td><td>
    
  </td></tr></table></div><div class="interface block option"><h3 class="toggle"><a class="pointer">Options</a></h3><table><colgroup><col class="name" /><col class="doc" /><col class="connect" /></colgroup><tr><th>Name</th><th>Documentation</th><th>Default</th></tr><tr><td><p class="option" id="option_target"><span class="name">target</span></p></td><td></td><td><p><span class="default">''</span></p></td></tr><tr><td><p class="option" id="option_terminate-on-error"><span class="name">terminate-on-error</span></p></td><td></td><td><p><span class="default">'yes'</span></p></td></tr><tr><td><p class="option" id="option_clean-target-dir"><span class="name">clean-target-dir</span></p></td><td><div class="documentation"><p xmlns:cx="http://xmlcalabash.com/ns/extensions" xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">Whether to erase the target directory prior to splitting etc. Otherwise,
    files from previous conversions might be included in the resulting zip file.</p></div></td><td><p><span class="default">'no'</span></p></td></tr><tr><td><p class="option" id="option_debug"><span class="name">debug</span></p></td><td></td><td><p><span class="default">'no'</span></p></td></tr><tr><td><p class="option" id="option_use-svg"><span class="name">use-svg</span></p></td><td></td><td><p><span class="default">''</span></p></td></tr><tr><td><p class="option" id="option_debug-dir-uri"><span class="name">debug-dir-uri</span></p></td><td></td><td><p><span class="default">'debug'</span></p></td></tr><tr><td><p class="option" id="option_status-dir-uri"><span class="name">status-dir-uri</span></p></td><td></td><td><p><span class="default">'status'</span></p></td></tr></table></div><div class="subpipeline block"><h3 class="toggle"><a class="pointer">Subpipeline</a></h3><table><colgroup><col /><col /><col class="name" /><col class="inputs" /><col class="outputs" /><col class="options" /></colgroup><tr><th colspan="3">Step</th><th>Inputs</th><th>Outputs</th><th>Options</th></tr><tr><td colspan="3"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_wrap-cover-in-svg">wrap-cover-in-svg</span></p></td><td><p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p></td><td></td><td>($use-svg[not(. = '')], /epub-config/cover/@svg, 'true')[1]</td></tr><tr><td colspan="3"><p class="names"><span class="type">p:variable</span> <span class="name" id="var_target-format">target-format</span></p></td><td><p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p></td><td></td><td>($target[not(. = '')], /epub-config/@format, 'EPUB3')[1]</td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="tr_simple-progress-msg.html">tr:simple-progress-msg</a></span> <span class="name" id="step_start-msg">start-msg</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_epub-convert_port_source">source</a> on <a href="#step_epub-convert">epub-convert</a></p></dd><dt>msgs</dt><dd>
      <pre><code>
 &lt;c:messages&gt;
   &lt;c:message xml:lang="en"&gt;Starting EPUB generation&lt;/c:message&gt;
   &lt;c:message xml:lang="de"&gt;Beginne EPUB-Erzeugung&lt;/c:message&gt;
 &lt;/c:messages&gt;

</code></pre>
    </dd></dl></td><td><p id="step_start-msg_port_result">result</p></td><td><p><a href="tr_simple-progress-msg.html#option_file">file</a> = 'epub-convert-start.txt'</p><p><a href="tr_simple-progress-msg.html#option_status-dir-uri">status-dir-uri</a> = $status-dir-uri</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="tr_file-uri.html">tr:file-uri</a></span> <span class="name" id="step_base-uri">base-uri</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">
			The output files are stored relative to the base-uri of the document on the primary input port.
		</p></td><td><dl><dt>source</dt><dd><p><a href="#step_start-msg_port_result">result</a> on <a href="#step_start-msg">start-msg</a></p></dd></dl></td><td><p id="step_base-uri_port_result">result</p></td><td><p><a href="tr_file-uri.html#option_filename">filename</a> = (base-uri(/*), static-base-uri())[1]</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="epub_create-ocf.html">epub:create-ocf</a></span> <span class="name" id="step_create-ocf">create-ocf</span></p></td><td><dl><dt>meta</dt><dd>
      <p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </dd></dl></td><td><p id="step_create-ocf_port_result">result</p></td><td><p><a href="epub_create-ocf.html#option_base-uri">base-uri</a> = /c:result/@local-href</p><p><a href="epub_create-ocf.html#option_debug">debug</a> = $debug</p><p><a href="epub_create-ocf.html#option_debug-dir-uri">debug-dir-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e163">d250e163</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_create-ocf_port_result">result</a> on <a href="#step_create-ocf">create-ocf</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_label-elements.html">p:label-elements</a></span> <span class="name" id="step_srcpaths">srcpaths</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">For the epubtools Schematron checks, we need to add srcpaths on elements that don’t have them yet.</p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_epub-convert_port_source">source</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </dd></dl></td><td><p id="step_srcpaths_port_result">result</p></td><td><p><a href="p_label-elements.html#option_attribute">attribute</a> = 'srcpath'</p><p><a href="p_label-elements.html#option_replace">replace</a> = 'false'</p><p><a href="p_label-elements.html#option_match">match</a> = '*[local-name() = ( 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',                               'div', 'nav', 'section', 'main',                               'ol', 'ul', 'li', 'dd', 'dt',                                'td', 'th',                                'em', 'span', 'b', 'i', 'strong',                                'code', 'pre',                               'a', 'img')]'</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d250e174">d250e174</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_srcpaths_port_result">result</a> on <a href="#step_srcpaths">srcpaths</a></p></dd></dl></td><td><p id="step_d250e174_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/add-srcpaths-to-input'</p><p><a href="tr_store-debug.html#option_extension">extension</a> = 'xhtml'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="epub_create-ops.html">epub:create-ops</a></span> <span class="name" id="step_create-ops">create-ops</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d250e174_port_result">result</a> on <a href="#step_d250e174">d250e174</a></p></dd><dt>conf</dt><dd>
      <p><a href="#step_epub-convert_port_conf">conf</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </dd><dt>meta</dt><dd>
      <p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </dd></dl></td><td><p id="step_create-ops_port_result">result</p></td><td><p><a href="epub_create-ops.html#option_base-uri">base-uri</a> = /c:result/@local-href</p><p><a href="epub_create-ops.html#option_target">target</a> = $target-format</p><p><a href="epub_create-ops.html#option_use-svg">use-svg</a> = $wrap-cover-in-svg</p><p><a href="epub_create-ops.html#option_terminate-on-error">terminate-on-error</a> = $terminate-on-error</p><p><a href="epub_create-ops.html#option_debug">debug</a> = $debug</p><p><a href="epub_create-ops.html#option_debug-dir-uri">debug-dir-uri</a> = $debug-dir-uri</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="epub_create-opf.html">epub:create-opf</a></span> <span class="name" id="step_create-opf">create-opf</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_create-ops_port_files">files</a> on <a href="#step_create-ops">create-ops</a></p>
      <p><a href="#step_create-ops_port_result">result</a> on <a href="#step_create-ops">create-ops</a></p>
    </dd><dt>meta</dt><dd>
      <p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </dd></dl></td><td><p id="step_create-opf_port_result">result</p></td><td><p><a href="epub_create-opf.html#option_base-uri">base-uri</a> = /c:result/@local-href</p><p><a href="epub_create-opf.html#option_target">target</a> = $target-format</p><p><a href="epub_create-opf.html#option_terminate-on-error">terminate-on-error</a> = $terminate-on-error</p><p><a href="epub_create-opf.html#option_use-svg">use-svg</a> = $wrap-cover-in-svg</p><p><a href="epub_create-opf.html#option_debug">debug</a> = $debug</p><p><a href="epub_create-opf.html#option_debug-dir-uri">debug-dir-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e243">d250e243</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_create-opf_port_result">result</a> on <a href="#step_create-opf">create-opf</a></p></dd></dl></td><td></td><td></td></tr><tr class="cases"><td rowspan="5"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_conditionally-remove-nav-from-filelist-if-epub2">conditionally-remove-nav-from-filelist-if-epub2</span></p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="$target-format = ('EPUB2', 'KF8')">$target-format = ('EPUB2', 'KF8')</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_delete.html">p:delete</a></span> <span class="name" id="step_discard-epub2-nav-html">discard-epub2-nav-html</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">nav.xhtml is only carried along for creating the guide element in EPUB2</p></td><td><dl><dt>source</dt><dd>
          <p><a href="#step_create-ops_port_files">files</a> on <a href="#step_create-ops">create-ops</a></p>
        </dd></dl></td><td><p id="step_discard-epub2-nav-html_port_result">result</p></td><td><p><a href="p_delete.html#option_match">match</a> = '/*/c:file[matches(@name, 'nav\.xhtml$')]'</p></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d250e266">d250e266</span></p></td><td><dl><dt>source</dt><dd>
          <p><a href="#step_create-ops_port_files">files</a> on <a href="#step_create-ops">create-ops</a></p>
        </dd></dl></td><td><p id="step_d250e266_port_result">result</p></td><td></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e275">d250e275</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr class="cases"><td rowspan="5"><p class="rotate" title="p:choose">p:choose <span class="name" id="step_conditionally-remove-nav-from-chunks-if-epub2">conditionally-remove-nav-from-chunks-if-epub2</span></p></td><td colspan="2"></td><td></td><td></td><td></td></tr><tr class="odd cond"><td rowspan="2"><p class="rotate" title="$target-format = 'EPUB2'">$target-format = 'EPUB2'</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_delete.html">p:delete</a></span> <span class="name" id="step_discard-epub2-nav">discard-epub2-nav</span></p><p xmlns:cat="urn:oasis:names:tc:entity:xmlns:xml:catalog" xmlns:c="http://www.w3.org/ns/xproc-step" xmlns:tr="http://transpect.io">nav.xhtml is only carried along for creating the guide element in EPUB2</p></td><td><dl><dt>source</dt><dd>
          <p><a href="#step_create-ops_port_result">result</a> on <a href="#step_create-ops">create-ops</a></p>
        </dd></dl></td><td><p id="step_discard-epub2-nav_port_result">result</p></td><td><p><a href="p_delete.html#option_match">match</a> = '/*/html:html[matches(@xml:base, 'nav\.xhtml$')]'</p></td></tr><tr class="even cond"><td rowspan="2"><p class="rotate" title="p:otherwise">p:otherwise</p></td><td colspan="1"></td><td></td><td></td><td></td></tr><tr><td colspan="1"><p class="names"><span class="type"><a href="p_identity.html">p:identity</a></span> <span class="name generated" id="step_d250e298">d250e298</span></p></td><td><dl><dt>source</dt><dd>
          <p><a href="#step_create-ops_port_result">result</a> on <a href="#step_create-ops">create-ops</a></p>
        </dd></dl></td><td><p id="step_d250e298_port_result">result</p></td><td></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e307">d250e307</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="epub_zip-package.html">epub:zip-package</a></span> <span class="name" id="step_zip-package">zip-package</span></p></td><td><dl><dt>ocf-filerefs</dt><dd>
      <p><a href="#step_create-ocf_port_files">files</a> on <a href="#step_create-ocf">create-ocf</a></p>
    </dd><dt>ops-filerefs</dt><dd>
      <p><a href="#step_conditionally-remove-nav-from-filelist-if-epub2_port_result">result</a> on <a href="#step_conditionally-remove-nav-from-filelist-if-epub2">conditionally-remove-nav-from-filelist-if-epub2</a></p>
    </dd><dt>opf-fileref</dt><dd>
      <p><a href="#step_create-opf_port_files">files</a> on <a href="#step_create-opf">create-opf</a></p>
    </dd><dt>meta</dt><dd>
      <p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </dd></dl></td><td><p id="step_zip-package_port_result">result</p></td><td><p><a href="epub_zip-package.html#option_base-uri">base-uri</a> = /c:result/@local-href</p><p><a href="epub_zip-package.html#option_debug">debug</a> = $debug</p><p><a href="epub_zip-package.html#option_debug-dir-uri">debug-dir-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href=".html">cxf:info</a></span> <span class="name" id="step_zip-info">zip-info</span></p></td><td></td><td></td><td><p>href = /c:zipfile/@href</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_set-attributes.html">p:set-attributes</a></span> <span class="name" id="step_insert-zip-info">insert-zip-info</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_zip-package_port_result">result</a> on <a href="#step_zip-package">zip-package</a></p>
    </dd><dt>attributes</dt><dd>
      <p><a href="#step_zip-info_port_result">result</a> on <a href="#step_zip-info">zip-info</a></p>
    </dd></dl></td><td><p id="step_insert-zip-info_port_result">result</p></td><td><p><a href="p_set-attributes.html#option_match">match</a> = '/*'</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="tr_file-uri.html">tr:file-uri</a></span> <span class="name" id="step_output-file-name">output-file-name</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_insert-zip-info_port_result">result</a> on <a href="#step_insert-zip-info">insert-zip-info</a></p></dd></dl></td><td><p id="step_output-file-name_port_result">result</p></td><td><p><a href="tr_file-uri.html#option_filename">filename</a> = /c:zipfile/@href</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e365">d250e365</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_output-file-name_port_result">result</a> on <a href="#step_output-file-name">output-file-name</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="p_wrap-sequence.html">p:wrap-sequence</a></span> <span class="name" id="step_wrap-for-schematron">wrap-for-schematron</span></p></td><td><dl><dt>source</dt><dd>
      <p><a href="#step_epub-convert_port_meta">meta</a> on <a href="#step_epub-convert">epub-convert</a></p>
      <p><a href="#step_create-opf_port_result">result</a> on <a href="#step_create-opf">create-opf</a></p>
      
      <p><a href="#step_conditionally-remove-nav-from-filelist-if-epub2_port_result">result</a> on <a href="#step_conditionally-remove-nav-from-filelist-if-epub2">conditionally-remove-nav-from-filelist-if-epub2</a></p>
      <p><a href="#step_create-ops_port_html">html</a> on <a href="#step_create-ops">create-ops</a></p>
      <p><a href="#step_create-ops_port_splitting-report">splitting-report</a> on <a href="#step_create-ops">create-ops</a></p>
      <p><a href="#step_conditionally-remove-nav-from-chunks-if-epub2_port_result">result</a> on <a href="#step_conditionally-remove-nav-from-chunks-if-epub2">conditionally-remove-nav-from-chunks-if-epub2</a></p>
      <p><a href="#step_insert-zip-info_port_result">result</a> on <a href="#step_insert-zip-info">insert-zip-info</a></p>
    </dd></dl></td><td><p id="step_wrap-for-schematron_port_result">result</p></td><td><p><a href="p_wrap-sequence.html#option_wrapper">wrapper</a> = 'c:wrap'</p></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="tr_store-debug.html">tr:store-debug</a></span> <span class="name generated" id="step_d250e413">d250e413</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_wrap-for-schematron_port_result">result</a> on <a href="#step_wrap-for-schematron">wrap-for-schematron</a></p></dd></dl></td><td><p id="step_d250e413_port_result">result</p></td><td><p><a href="tr_store-debug.html#option_pipeline-step">pipeline-step</a> = 'epubtools/input-for-schematron'</p><p><a href="tr_store-debug.html#option_active">active</a> = $debug</p><p><a href="tr_store-debug.html#option_base-uri">base-uri</a> = $debug-dir-uri</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e419">d250e419</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d250e413_port_result">result</a> on <a href="#step_d250e413">d250e413</a></p></dd></dl></td><td></td><td></td></tr><tr class="foreach"><td rowspan="5"><p class="rotate" title="p:for-each">p:for-each <span class="name" id="step_schematrons">schematrons</span></p></td><td colspan="2"></td><td id="step_schematrons_port_current">
      <p><a href="#step_epub-convert_port_schematron">schematron</a> on <a href="#step_epub-convert">epub-convert</a></p>
      <p><a href="#step_epub-convert_port_custom-schematron">custom-schematron</a> on <a href="#step_epub-convert">epub-convert</a></p>
    </td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="tr_oxy-validate-with-schematron.html">tr:oxy-validate-with-schematron</a></span> <span class="name" id="step_sch0">sch0</span></p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_wrap-for-schematron_port_result">result</a> on <a href="#step_wrap-for-schematron">wrap-for-schematron</a></p>
      </dd><dt>schema</dt><dd>
        <p><a href="#step_schematrons_port_current">current</a> on <a href="#step_schematrons">schematrons</a></p>
      </dd><dt>parameters</dt><dd>
        <p>p:empty</p>
      </dd></dl></td><td><p id="step_sch0_port_result">result</p></td><td></td></tr><tr class="local-end"><td colspan="2"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e451">d250e451</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_sch0_port_result">result</a> on <a href="#step_sch0">sch0</a></p></dd></dl></td><td></td><td></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name generated" id="step_d250e453">d250e453</span></p></td><td><dl><dt>source</dt><dd>
        <p><a href="#step_sch0_port_report">report</a> on <a href="#step_sch0">sch0</a></p>
      </dd></dl></td><td><p id="step_d250e453_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'tr:rule-family'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = (/*/@tr:rule-family, 'epubtools-custom')[1]</p></td></tr><tr><td colspan="2"><p class="names"><span class="type"><a href="p_add-attribute.html">p:add-attribute</a></span> <span class="name" id="step_sch">sch</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_d250e453_port_result">result</a> on <a href="#step_d250e453">d250e453</a></p></dd></dl></td><td><p id="step_sch_port_result">result</p></td><td><p><a href="p_add-attribute.html#option_match">match</a> = '/*'</p><p><a href="p_add-attribute.html#option_attribute-name">attribute-name</a> = 'tr:step-name'</p><p><a href="p_add-attribute.html#option_attribute-value">attribute-value</a> = string-join(                   (                     'epubtools',                     (                       /opf:package/opf:metadata/dc:identifier[@id = ../@unique-identifier],                       /opf:package/opf:metadata/dc:identifier,                       /opf:package/opf:metadata/dc:title                     )[1]                   ),                   ' '                 )</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e475">d250e475</span></p></td><td><dl><dt>source</dt><dd></dd></dl></td><td></td><td></td></tr><tr><td colspan="3"><p class="names"><span class="type"><a href="tr_simple-progress-msg.html">tr:simple-progress-msg</a></span> <span class="name" id="step_success-msg">success-msg</span></p></td><td><dl><dt>source</dt><dd></dd><dt>msgs</dt><dd>
      <pre><code>
 &lt;c:messages&gt;
   &lt;c:message xml:lang="en"&gt;EPUB generation finished (see the HTML report though – errors will be reported there)&lt;/c:message&gt;
   &lt;c:message xml:lang="de"&gt;EPUB-Erzeugung abgeschlossen (bitte im HTML-Report nachsehen, ob fehlerfrei)&lt;/c:message&gt;
 &lt;/c:messages&gt;

</code></pre>
    </dd></dl></td><td><p id="step_success-msg_port_result">result</p></td><td><p><a href="tr_simple-progress-msg.html#option_file">file</a> = 'epub-convert-success.txt'</p><p><a href="tr_simple-progress-msg.html#option_status-dir-uri">status-dir-uri</a> = $status-dir-uri</p></td></tr><tr class="local-end"><td colspan="3"><p class="names"><span class="type"><a href="p_sink.html">p:sink</a></span> <span class="name generated" id="step_d250e495">d250e495</span></p></td><td><dl><dt>source</dt><dd><p><a href="#step_success-msg_port_result">result</a> on <a href="#step_success-msg">success-msg</a></p></dd></dl></td><td></td><td></td></tr></table></div><div class="interface block use"><h3 class="toggle"><a class="pointer">Used by</a></h3><ul><li><p class="nav" id="nav_docx2jats">declare-step <a href="docx2jats.html">docx2jats <span title="anonymous – this step has no type">Ⓐ</span></a></p></li></ul></div></div></div></div></body></html>